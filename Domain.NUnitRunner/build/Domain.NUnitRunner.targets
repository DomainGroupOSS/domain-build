<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">  <PropertyGroup>    <NUnitProjectOutputDirectory>$(OutDir)_PublishedNUnitTests\$(MSBuildProjectName)</NUnitProjectOutputDirectory>  </PropertyGroup>  <PropertyGroup>    <PrepareForRunDependsOn>      $(PrepareForRunDependsOn);      _CopyNUnitTests    </PrepareForRunDependsOn>  </PropertyGroup>    <!--  ============================================================  _CopyNUnitTests   This target will copy the build outputs along with the   content files into a _PublishedNUnitTests folder.    This Task is only necessary when $(OutDir) has been redirected  to a folder other than ~\bin such as is the case with Team Build.  ============================================================  -->  <Target Name="_CopyNUnitTests" Condition="'$(OutDir)' != '$(OutputPath)'">    <!-- Log tasks -->    <Message Text="Copying Application Project Files for $(MSBuildProjectName)" />    <!-- Create the _PublishedNUnitTests\app\ folder -->    <MakeDir Directories="$(NUnitProjectOutputDirectory)" />    <!-- Copy build outputs to _PublishedNUnitTests\app\ folder -->    <Copy SourceFiles="@(IntermediateAssembly)" DestinationFolder="$(NUnitProjectOutputDirectory)" SkipUnchangedFiles="true"/>    <Copy SourceFiles="@(AddModules)" DestinationFolder="$(NUnitProjectOutputDirectory)" SkipUnchangedFiles="true"/>    <Copy SourceFiles="$(IntermediateOutputPath)$(_SGenDllName)" DestinationFolder="$(NUnitProjectOutputDirectory)\%(Content.SubFolder)%(Content.RecursiveDir)" SkipUnchangedFiles="true" Condition="'$(_SGenDllCreated)'=='true'"/>    <Copy SourceFiles="$(IntermediateOutputPath)$(TargetName).pdb" DestinationFolder="$(NUnitProjectOutputDirectory)" SkipUnchangedFiles="true" Condition="'$(_DebugSymbolsProduced)'=='true'"/>    <Copy SourceFiles="@(DocFileItem)" DestinationFolder="$(NUnitProjectOutputDirectory)" SkipUnchangedFiles="true" Condition="'$(_DocumentationFileProduced)'=='true'"/>    <Copy SourceFiles="@(IntermediateSatelliteAssembliesWithTargetPath)" DestinationFiles="@(IntermediateSatelliteAssembliesWithTargetPath->'$(NUnitProjectOutputDirectory)\%(Culture)\$(TargetName).resources.dll')" SkipUnchangedFiles="true"/>    <Copy SourceFiles="@(ReferenceComWrappersToCopyLocal); @(ResolvedIsolatedComModules); @(_DeploymentLooseManifestFile); @(NativeReferenceFile)" DestinationFolder="$(NUnitProjectOutputDirectory)" SkipUnchangedFiles="true"/>    <!-- copy any referenced assemblies to _PublishedNUnitTests\app\ folder -->    <Copy SourceFiles="@(ReferenceCopyLocalPaths)" DestinationFiles="@(ReferenceCopyLocalPaths->'$(NUnitProjectOutputDirectory)\%(DestinationSubDirectory)%(Filename)%(Extension)')" SkipUnchangedFiles="true"/>    <!-- Copy content files recursively to _PublishedNUnitTests\app\ folder -->    <Copy SourceFiles="@(Content)" Condition="'%(Content.Link)' == ''" DestinationFolder="$(NUnitProjectOutputDirectory)\%(Content.RelativeDir)" SkipUnchangedFiles="true"/>    <Copy SourceFiles="@(Content)" Condition="'%(Content.Link)' != ''" DestinationFiles="$(NUnitProjectOutputDirectory)\%(Content.Link)" SkipUnchangedFiles="true"/>    <!-- Copy items that have been marked to be copied to the output folder -->    <Copy SourceFiles="@(_SourceItemsToCopyToOutputDirectory)" DestinationFolder="$(NUnitProjectOutputDirectory)" SkipUnchangedFiles="true"/>    <Copy SourceFiles="@(_SourceItemsToCopyToOutputDirectoryAlways)" DestinationFolder="$(NUnitProjectOutputDirectory)" SkipUnchangedFiles="false"/>    <!-- Copy items that need to be bin deployed to the output folder -->    <Copy SourceFiles="@(_binDeployableAssemblies)" DestinationFolder="$(NUnitProjectOutputDirectory)\%(RecursiveDir)" SkipUnchangedFiles="true"/>    <!-- Copy config files to _PublishedNUnitTests\app\ folder -->    <Copy SourceFiles="$(OutDir)$(TargetFileName).config" DestinationFolder="$(NUnitProjectOutputDirectory)" ContinueOnError="true" SkipUnchangedFiles="true"/>  </Target></Project>